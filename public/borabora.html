<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>보라보라 리조트 추천 | 타히티의 진주 - 선샤인투어</title>
    <meta name="description" content="보라보라의 최고급 오버워터 방갈로 리조트를 소개합니다. 포시즌스, 세인트레지스 등 럭셔리 리조트에서 세계에서 가장 아름다운 석호를 경험하세요.">
    <meta name="keywords" content="보라보라, 타히티, 남태평양 여행, 보라보라 허니문, 오버워터 방갈로, 세인트레지스, 포시즌스">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/destination.css">
    <link rel="stylesheet" href="/static/css/region.css">
</head>
<body>
    <!-- 네비게이션 -->
    <nav class="navbar">
        <div class="container">
            <a href="/" class="logo">
                <i class="fas fa-umbrella-beach"></i>
                Sunshine Tour
            </a>
            <ul class="nav-menu">
                <li><a href="/">홈</a></li>
                <li><a href="/thailand">태국</a></li>
                <li><a href="/hawaii">하와이</a></li>
                <li><a href="/indonesia">인도네시아</a></li>
                <li><a href="/about">소개</a></li>
                <li><a href="/contact">문의</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-region">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">보라보라</h1>
            <p class="hero-subtitle">타히티의 진주, 세계에서 가장 아름다운 석호</p>
        </div>
    </section>

    <!-- 지역 소개 -->
    <section class="region-intro">
        <div class="container">
            <h2 class="section-title">보라보라에서의 꿈같은 시간</h2>
            <p class="intro-text">에메랄드빛 석호와 오테마누 산이 어우러진 보라보라는 세계 최고의 오버워터 방갈로 리조트들이 모여있는 로맨틱한 섬입니다.</p>
        </div>
    </section>

    <!-- 특징 -->
    <section class="region-features">
        <div class="container">
            <div class="features-grid">
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-gem"></i>
                    </div>
                    <h3>세계 최고 석호</h3>
                    <p>에메랄드빛 투명한 바다</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-hotel"></i>
                    </div>
                    <h3>럭셔리 리조트</h3>
                    <p>세계 최고급 오버워터 방갈로</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mountain"></i>
                    </div>
                    <h3>오테마누 산</h3>
                    <p>드라마틱한 화산 풍경</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 리조트 목록 -->
    <section class="resorts-section">
        <div class="container">
            <h2 class="section-title">추천 리조트</h2>
            <div id="resorts-container" class="resorts-grid">
                <div class="loading-message">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>리조트 정보를 불러오는 중...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-umbrella-beach"></i> Sunshine Tour</h3>
                    <p>세계 최고의 리조트에서 꿈같은 허니문을 만들어드립니다.</p>
                </div>
                <div class="footer-section">
                    <h4>바로가기</h4>
                    <ul>
                        <li><a href="/">홈</a></li>
                        <li><a href="/thailand">태국</a></li>
                        <li><a href="/hawaii">하와이</a></li>
                        <li><a href="/indonesia">인도네시아</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>문의</h4>
                    <p><i class="fas fa-phone"></i> 1588-0000</p>
                    <p><i class="fas fa-envelope"></i> info@sunshinetour.com</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Sunshine Tour. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
        <div id="lightbox-caption"></div>
    </div>

    <script>
    // 지역 ID 설정
    const REGION_ID = 'region-tahiti-borabora';
    const API_BASE = '/api/resorts';
    
    // 리조트 데이터 로드
    async function loadResorts() {
        try {
            const response = await fetch(`${API_BASE}?region_id=${REGION_ID}&is_active=true`);
            const result = await response.json();
            
            const container = document.getElementById('resorts-container');
            
            if (!result.success || !result.data || result.data.length === 0) {
                container.innerHTML = `
                    <div class="no-resorts">
                        <p>현재 표시할 리조트가 없습니다.</p>
                    </div>
                `;
                return;
            }
            
            const fallbackImg = 'https://images.unsplash.com/photo-1571896349842-33c89424de2d?q=80&w=2080';
            const resorts = result.data;
            
            // 카테고리 라벨 매핑 (한글/영어 모두 지원)
            const categoryLabels = {
                'luxury': '럭셔리',
                'premium': '프리미엄',
                'standard': '스탠다드',
                '럭셔리': '럭셔리',
                '프리미엄': '프리미엄',
                '스탠다드': '스탠다드'
            };
            
            container.innerHTML = resorts.map(resort => {
                const features = Array.isArray(resort.features) ? resort.features : [];
                const gallery = Array.isArray(resort.gallery_images) ? resort.gallery_images : [];
                const categoryLabel = categoryLabels[resort.category] || resort.category || 'RESORT';
                
                return `
                    <div class="resort-card">
                        <div class="resort-image">
                            <img src="${resort.main_image_url || fallbackImg}" 
                                 alt="${resort.name_ko}"
                                 onerror="this.src='${fallbackImg}'">
                            ${resort.category ? `<span class="resort-badge">${categoryLabel}</span>` : ''}
                        </div>
                        <div class="resort-info">
                            <span class="resort-category">${categoryLabel}</span>
                            <h3 class="resort-name">${resort.name_ko}</h3>
                            <p class="resort-description">${resort.description || ''}</p>
                            <div class="resort-features">
                                ${features.slice(0, 4).map(f => `
                                    <span class="feature-tag">
                                        <i class="fas fa-check"></i> ${f}
                                    </span>
                                `).join('')}
                            </div>
                            <div class="resort-gallery">
                                ${gallery.slice(0, 6).map((img, idx) => `
                                    <img src="${img}" 
                                         alt="${resort.name_ko} - 이미지 ${idx + 1}"
                                         onclick="openLightbox('${img}', '${resort.name_ko} - 이미지 ${idx + 1}')"
                                         onerror="this.src='${fallbackImg}'">
                                `).join('')}
                            </div>
                            <button class="resort-button" onclick="location.href='/contact'">
                                예약 문의 <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
        } catch (error) {
            console.error('리조트 로딩 실패:', error);
            document.getElementById('resorts-container').innerHTML = `
                <div class="error-message">
                    <p>리조트 정보를 불러오는데 실패했습니다. 잠시 후 다시 시도해주세요.</p>
                </div>
            `;
        }
    }
    
    // Lightbox 기능
    function openLightbox(imgSrc, caption) {
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxCaption = document.getElementById('lightbox-caption');
        
        lightbox.style.display = 'block';
        lightboxImg.src = imgSrc;
        lightboxCaption.textContent = caption;
    }
    
    // Lightbox 닫기
    document.querySelector('.lightbox-close').onclick = function() {
        document.getElementById('lightbox').style.display = 'none';
    };
    
    document.getElementById('lightbox').onclick = function(e) {
        if (e.target.id === 'lightbox') {
            this.style.display = 'none';
        }
    };
    
    // ESC 키로 닫기
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            document.getElementById('lightbox').style.display = 'none';
        }
    });
    
    // 페이지 로드 시 리조트 데이터 로드
    document.addEventListener('DOMContentLoaded', loadResorts);
    </script>
</body>
</html>